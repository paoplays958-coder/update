-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
--    üêâ DRAGON HUB 3.0
--    BETA 0.1 by: paozin
--    Discord: discord.gg/pVsWE7WszB
--    COMPAT√çVEL COM TODOS OS EXECUTORES PC/MOBILE
-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

print("üêâ Dragon Hub 3.0 - Beta 0.1 by:paozin Carregando...")

task.wait(2)

-- ========== VERIFICA√á√ÉO DE SERVI√áOS ==========
local success, Services = pcall(function()
    return {
        Players = game:GetService("Players"),
        UserInputService = game:GetService("UserInputService"),
        RunService = game:GetService("RunService"),
        Lighting = game:GetService("Lighting"),
        VirtualUser = game:GetService("VirtualUser"),
        ReplicatedStorage = game:GetService("ReplicatedStorage")
    }
end)

if not success then
    warn("‚ùå Erro ao carregar servi√ßos!")
    return
end

local Players = Services.Players
local UserInputService = Services.UserInputService
local RunService = Services.RunService
local Lighting = Services.Lighting
local ReplicatedStorage = Services.ReplicatedStorage

-- ========== VERIFICA√á√ÉO DO PLAYER ==========
local player = Players.LocalPlayer
if not player then
    warn("‚ùå Player n√£o encontrado!")
    return
end

local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid", 10)
local rootPart = character:WaitForChild("HumanoidRootPart", 10)

if not humanoid or not rootPart then
    warn("‚ùå Humanoid ou RootPart n√£o encontrado!")
    return
end

-- ========== DETEC√á√ÉO DE PLATAFORMA ==========
local isMobile = false
pcall(function()
    isMobile = UserInputService.TouchEnabled and not UserInputService.KeyboardEnabled
end)

print("‚úì Plataforma:", isMobile and "Mobile" or "PC")

-- ========== CARREGAR BIBLIOTECA UI ==========
local redzlib
local uiSuccess = pcall(function()
    redzlib = loadstring(game:HttpGet("https://raw.githubusercontent.com/tbao143/Library-ui/refs/heads/main/Redzhubui"))()
end)

if not uiSuccess or not redzlib then
    warn("‚ùå Erro ao carregar UI! Verifique sua internet.")
    return
end

local Window = redzlib:MakeWindow({
    Title = "üêâ Dragon Hub 3.0",
    SubTitle = "Beta 0.1 by: paozin"
})

-- ========== VARI√ÅVEIS ORIGINAIS ==========
local originalWalkSpeed = humanoid.WalkSpeed or 16
local originalJumpPower = humanoid.JumpPower or 50
local originalGravity = workspace.Gravity or 196.2
local originalFOV = 70
local originalBrightness = Lighting.Brightness
local originalFogEnd = Lighting.FogEnd
local originalAmbient = Lighting.Ambient

-- ========== VARI√ÅVEIS DE CONTROLE ==========
local activeConnections = {}
local activeToggles = {
    fly = false,
    speed = false,
    jump = false,
    infiniteJump = false,
    noclip = false,
    carSpeed = false,
    carFly = false,
    clickTP = false,
    esp = false,
    fullbright = false,
    antiAFK = false,
    antiBan = false
}

-- ========== FUN√á√ïES AUXILIARES ==========

-- Lista de jogadores
local function getPlayersList()
    local list = {}
    pcall(function()
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= player and p.Name then
                table.insert(list, p.Name)
            end
        end
    end)
    return #list > 0 and list or {"Nenhum"}
end

-- Lista de jogadores COM seus carros
local function getPlayersWithCars()
    local list = {}
    pcall(function()
        for _, p in pairs(Players:GetPlayers()) do
            if p.Character then
                local hum = p.Character:FindFirstChild("Humanoid")
                if hum and hum.SeatPart and hum.SeatPart:IsA("VehicleSeat") then
                    local carModel = hum.SeatPart.Parent
                    if carModel and carModel:IsA("Model") then
                        local displayName = p.Name .. " (" .. carModel.Name .. ")"
                        table.insert(list, displayName)
                    end
                end
            end
        end
    end)
    return #list > 0 and list or {"Nenhum"}
end

-- Fun√ß√£o para pegar o carro de um jogador espec√≠fico
local function getPlayerCar(playerName)
    local targetPlayer = Players:FindFirstChild(playerName)
    if targetPlayer and targetPlayer.Character then
        local hum = targetPlayer.Character:FindFirstChild("Humanoid")
        if hum and hum.SeatPart and hum.SeatPart:IsA("VehicleSeat") then
            return hum.SeatPart.Parent
        end
    end
    return nil
end

-- CORRIGIDO: Fun√ß√£o para clonar carros existentes no mapa
local function spawnVehiclesFromMap()
    local spawnedCount = 0
    local vehiclesFound = {}
    
    pcall(function()
        -- Encontrar todos os carros no mapa
        for _, obj in pairs(workspace:GetDescendants()) do
            if obj:IsA("VehicleSeat") and obj.Parent and obj.Parent:IsA("Model") then
                local carModel = obj.Parent
                
                -- Verificar se √© um carro v√°lido
                if carModel.Name ~= "Workspace" and carModel:FindFirstChild("VehicleSeat") then
                    table.insert(vehiclesFound, carModel)
                end
            end
        end
        
        -- Se encontrou carros, clonar 5 deles
        if #vehiclesFound > 0 then
            local basePosition = rootPart.Position
            
            for i = 1, 5 do
                -- Pegar um carro aleat√≥rio da lista
                local randomCar = vehiclesFound[math.random(1, #vehiclesFound)]
                
                if randomCar then
                    -- Calcular posi√ß√£o em c√≠rculo
                    local angle = (i - 1) * (360 / 5)
                    local radians = math.rad(angle)
                    local distance = 20
                    
                    local x = basePosition.X + (math.cos(radians) * distance)
                    local z = basePosition.Z + (math.sin(radians) * distance)
                    local y = basePosition.Y + 2
                    
                    -- Clonar o carro
                    local clonedCar = randomCar:Clone()
                    
                    -- Posicionar
                    if clonedCar.PrimaryPart then
                        clonedCar:SetPrimaryPartCFrame(CFrame.new(x, y, z))
                    elseif clonedCar:FindFirstChild("VehicleSeat") then
                        clonedCar:MoveTo(Vector3.new(x, y, z))
                    end
                    
                    -- Adicionar ao workspace
                    clonedCar.Parent = workspace
                    spawnedCount = spawnedCount + 1
                    
                    task.wait(0.3)
                end
            end
        end
    end)
    
    return spawnedCount
end

-- ========== BUILD TOOL ==========
local selectedBlockType = "Bloco Cinza"

local blockTypes = {
    ["Bloco Cinza"] = {Material = Enum.Material.Concrete, Color = Color3.fromRGB(163, 162, 165)},
    ["Bloco Vermelho"] = {Material = Enum.Material.Concrete, Color = Color3.fromRGB(196, 40, 28)},
    ["Bloco Azul"] = {Material = Enum.Material.Concrete, Color = Color3.fromRGB(13, 105, 172)},
    ["Bloco Verde"] = {Material = Enum.Material.Concrete, Color = Color3.fromRGB(75, 151, 75)},
    ["Bloco Amarelo"] = {Material = Enum.Material.Concrete, Color = Color3.fromRGB(245, 205, 48)},
    ["Bloco Roxo"] = {Material = Enum.Material.Concrete, Color = Color3.fromRGB(107, 50, 124)},
    ["Vidro"] = {Material = Enum.Material.Glass, Color = Color3.fromRGB(255, 255, 255), Transparency = 0.5}
}

local function createBuildTool()
    pcall(function()
        -- Remover tools antigas
        for _, item in pairs(player.Backpack:GetChildren()) do
            if item.Name == "Build Tool" then
                item:Destroy()
            end
        end
        
        for _, item in pairs(character:GetChildren()) do
            if item.Name == "Build Tool" and item:IsA("Tool") then
                item:Destroy()
            end
        end
        
        -- Criar nova tool
        local tool = Instance.new("Tool")
        tool.Name = "Build Tool"
        tool.RequiresHandle = false
        tool.CanBeDropped = false
        
        local handle = Instance.new("Part")
        handle.Name = "Handle"
        handle.Size = Vector3.new(1, 1, 1)
        handle.Transparency = 1
        handle.CanCollide = false
        handle.Parent = tool
        
        tool.Activated:Connect(function()
            pcall(function()
                local mouse = player:GetMouse()
                
                if mouse and mouse.Target then
                    local blockConfig = blockTypes[selectedBlockType]
                    
                    local block = Instance.new("Part")
                    block.Size = Vector3.new(4, 1, 4)
                    block.Material = blockConfig.Material
                    block.Color = blockConfig.Color
                    block.Anchored = true
                    block.CFrame = CFrame.new(mouse.Hit.Position) * CFrame.new(0, 0.5, 0)
                    
                    if blockConfig.Transparency then
                        block.Transparency = blockConfig.Transparency
                    end
                    
                    block.Parent = workspace
                end
            end)
        end)
        
        tool.Parent = player.Backpack
        print("‚úì Build Tool criada:", selectedBlockType)
    end)
end

-- ========== TAB 1: MOVIMENTO ==========
local Tab1 = Window:MakeTab({"Movimento", "home"})

Tab1:AddSection({"Voo"})

local flying = false
local flySpeed = 50
local flyBody, flyGyro

Tab1:AddToggle({
    Name = "Fly",
    Default = false,
    Callback = function(v)
        flying = v
        activeToggles.fly = v
        
        pcall(function()
            if v then
                flyBody = Instance.new("BodyVelocity")
                flyBody.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
                flyBody.Velocity = Vector3.new(0, 0, 0)
                flyBody.Parent = rootPart
                
                flyGyro = Instance.new("BodyGyro")
                flyGyro.MaxTorque = Vector3.new(math.huge, math.huge, math.huge)
                flyGyro.P = 9000
                flyGyro.Parent = rootPart
                
                activeConnections.fly = RunService.Heartbeat:Connect(function()
                    if not flying then return end
                    
                    pcall(function()
                        if not rootPart or not rootPart.Parent then
                            flying = false
                            return
                        end
                        
                        local cam = workspace.CurrentCamera
                        local direction = Vector3.new(0, 0, 0)
                        
                        if isMobile then
                            if humanoid and humanoid.MoveVector then
                                local move = humanoid.MoveVector
                                if move.Magnitude > 0 then
                                    direction = (cam.CFrame.LookVector * move.Z) + (cam.CFrame.RightVector * move.X)
                                end
                            end
                        else
                            if UserInputService:IsKeyDown(Enum.KeyCode.W) then 
                                direction = direction + cam.CFrame.LookVector 
                            end
                            if UserInputService:IsKeyDown(Enum.KeyCode.S) then 
                                direction = direction - cam.CFrame.LookVector 
                            end
                            if UserInputService:IsKeyDown(Enum.KeyCode.A) then 
                                direction = direction - cam.CFrame.RightVector 
                            end
                            if UserInputService:IsKeyDown(Enum.KeyCode.D) then 
                                direction = direction + cam.CFrame.RightVector 
                            end
                            if UserInputService:IsKeyDown(Enum.KeyCode.Space) then 
                                direction = direction + Vector3.new(0, 1, 0) 
                            end
                            if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then 
                                direction = direction - Vector3.new(0, 1, 0) 
                            end
                        end
                        
                        if direction.Magnitude > 0 then
                            direction = direction.Unit
                            flyBody.Velocity = direction * flySpeed
                        else
                            flyBody.Velocity = Vector3.new(0, 0, 0)
                        end
                        
                        flyGyro.CFrame = cam.CFrame
                    end)
                end)
                
                print("‚úì Fly ativado")
            else
                flying = false
                
                if activeConnections.fly then 
                    activeConnections.fly:Disconnect() 
                    activeConnections.fly = nil
                end
                
                if flyBody and flyBody.Parent then 
                    flyBody:Destroy() 
                end
                flyBody = nil
                
                if flyGyro and flyGyro.Parent then 
                    flyGyro:Destroy() 
                end
                flyGyro = nil
                
                print("‚úì Fly desativado")
            end
        end)
    end
})

Tab1:AddSlider({
    Text = "Velocidade Fly",
    Min = 10,
    Max = 200,
    Default = 50,
    Callback = function(v)
        flySpeed = v
    end
})

Tab1:AddSection({"Velocidade"})

local speedEnabled = false
local speedValue = 16

Tab1:AddToggle({
    Name = "Speed",
    Default = false,
    Callback = function(v)
        speedEnabled = v
        activeToggles.speed = v
        
        pcall(function()
            if humanoid then
                humanoid.WalkSpeed = v and speedValue or originalWalkSpeed
            end
        end)
    end
})

Tab1:AddSlider({
    Text = "Velocidade",
    Min = 16,
    Max = 150,
    Default = 16,
    Callback = function(v)
        speedValue = v
        pcall(function()
            if speedEnabled and humanoid then 
                humanoid.WalkSpeed = v 
            end
        end)
    end
})

Tab1:AddSection({"Pulo"})

local jumpEnabled = false
local jumpValue = 50

Tab1:AddToggle({
    Name = "Jump Boost",
    Default = false,
    Callback = function(v)
        jumpEnabled = v
        activeToggles.jump = v
        
        pcall(function()
            if humanoid then
                humanoid.JumpPower = v and jumpValue or originalJumpPower
            end
        end)
    end
})

Tab1:AddSlider({
    Text = "For√ßa do Pulo",
    Min = 50,
    Max = 300,
    Default = 50,
    Callback = function(v)
        jumpValue = v
        pcall(function()
            if jumpEnabled and humanoid then 
                humanoid.JumpPower = v 
            end
        end)
    end
})

Tab1:AddToggle({
    Name = "Infinite Jump",
    Default = false,
    Callback = function(v)
        activeToggles.infiniteJump = v
        
        pcall(function()
            if v then
                activeConnections.infiniteJump = UserInputService.JumpRequest:Connect(function()
                    pcall(function()
                        if humanoid then
                            humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
                        end
                    end)
                end)
            else
                if activeConnections.infiniteJump then 
                    activeConnections.infiniteJump:Disconnect() 
                    activeConnections.infiniteJump = nil
                end
            end
        end)
    end
})

Tab1:AddSection({"Atravessar"})

Tab1:AddToggle({
    Name = "Noclip",
    Default = false,
    Callback = function(v)
        activeToggles.noclip = v
        
        pcall(function()
            if v then
                activeConnections.noclip = RunService.Stepped:Connect(function()
                    pcall(function()
                        if not character then return end
                        for _, part in pairs(character:GetDescendants()) do
                            if part:IsA("BasePart") and part.CanCollide then
                                part.CanCollide = false
                            end
                        end
                    end)
                end)
            else
                if activeConnections.noclip then 
                    activeConnections.noclip:Disconnect() 
                    activeConnections.noclip = nil
                end
                
                pcall(function()
                    for _, part in pairs(character:GetDescendants()) do
                        if part:IsA("BasePart") then
                            part.CanCollide = true
                        end
                    end
                end)
            end
        end)
    end
})

-- ========== TAB 2: VE√çCULOS (CORRIGIDO) ==========
local Tab2 = Window:MakeTab({"Ve√≠culos", "shopping-cart"})

Tab2:AddSection({"Spawnar Ve√≠culos"})

Tab2:AddButton({"Spawnar 5 Carros Aleat√≥rios", function()
    pcall(function()
        print("üöó Procurando carros no mapa...")
        local count = spawnVehiclesFromMap()
        
        if count > 0 then
            print("‚úì", count, "carro(s) spawnado(s) ao seu redor!")
        else
            print("‚úó Nenhum carro encontrado no mapa")
            print("‚ÑπÔ∏è Tente andar pelo mapa at√© encontrar carros")
        end
    end)
end})

Tab2:AddSection({"Controle de Ve√≠culos"})

local selectedCarPlayer = nil
local carSpeedEnabled = false
local carSpeedValue = 50

local carPlayerDrop = Tab2:AddDropdown({
    Name = "Selecionar Jogador",
    Options = getPlayersWithCars(),
    Default = "Nenhum",
    Callback = function(v)
        selectedCarPlayer = v
        print("‚úì Selecionado:", v)
    end
})

Tab2:AddButton({"Atualizar Lista", function()
    pcall(function()
        local newList = getPlayersWithCars()
        carPlayerDrop:Refresh(newList, true)
        local count = #newList
        if newList[1] == "Nenhum" then count = 0 end
        print("‚úì Lista atualizada! Jogadores com carros:", count)
    end)
end})

Tab2:AddSection({"Car Speed"})

Tab2:AddToggle({
    Name = "Ativar Car Speed",
    Default = false,
    Callback = function(v)
        carSpeedEnabled = v
        activeToggles.carSpeed = v
        
        pcall(function()
            if v then
                if selectedCarPlayer and selectedCarPlayer ~= "Nenhum" then
                    local playerName = selectedCarPlayer:match("(.+)%s%(")
                    
                    activeConnections.carSpeed = RunService.Heartbeat:Connect(function()
                        pcall(function()
                            if not carSpeedEnabled then return end
                            
                            local car = getPlayerCar(playerName)
                            if car then
                                for _, obj in pairs(car:GetDescendants()) do
                                    if obj:IsA("VehicleSeat") then
                                        obj.MaxSpeed = carSpeedValue
                                    end
                                end
                            end
                        end)
                    end)
                    
                    print("‚úì Car Speed ativado para:", selectedCarPlayer)
                else
                    print("‚úó Selecione um jogador primeiro!")
                    carSpeedEnabled = false
                end
            else
                if activeConnections.carSpeed then 
                    activeConnections.carSpeed:Disconnect() 
                    activeConnections.carSpeed = nil
                end
                
                pcall(function()
                    if selectedCarPlayer and selectedCarPlayer ~= "Nenhum" then
                        local playerName = selectedCarPlayer:match("(.+)%s%(")
                        local car = getPlayerCar(playerName)
                        if car then
                            for _, obj in pairs(car:GetDescendants()) do
                                if obj:IsA("VehicleSeat") then
                                    obj.MaxSpeed = 25
                                end
                            end
                        end
                    end
                end)
                
                print("‚úì Car Speed desativado")
            end
        end)
    end
})

Tab2:AddSlider({
    Text = "Velocidade do Carro",
    Min = 1,
    Max = 250,
    Default = 50,
    Callback = function(v)
        carSpeedValue = v
    end
})

Tab2:AddSection({"Car Fly"})

local carFlyEnabled = false
local carFlySpeed = 70
local carFlyBody, carFlyGyro

Tab2:AddToggle({
    Name = "Car Fly",
    Default = false,
    Callback = function(v)
        carFlyEnabled = v
        activeToggles.carFly = v
        
        pcall(function()
            if v then
                if humanoid.SeatPart and humanoid.SeatPart:IsA("VehicleSeat") then
                    local seat = humanoid.SeatPart
                    
                    carFlyBody = Instance.new("BodyVelocity")
                    carFlyBody.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
                    carFlyBody.Velocity = Vector3.new(0, 0, 0)
                    carFlyBody.Parent = seat
                    
                    carFlyGyro = Instance.new("BodyGyro")
                    carFlyGyro.MaxTorque = Vector3.new(math.huge, math.huge, math.huge)
                    carFlyGyro.P = 9000
                    carFlyGyro.Parent = seat
                    
                    activeConnections.carFly = RunService.Heartbeat:Connect(function()
                        pcall(function()
                            if not carFlyEnabled or not humanoid.SeatPart then return end
                            
                            local cam = workspace.CurrentCamera
                            local dir = Vector3.new(0, 0, 0)
                            
                            if isMobile then
                                if humanoid.MoveVector then
                                    local move = humanoid.MoveVector
                                    if move.Magnitude > 0 then
                                        dir = cam.CFrame.LookVector * move.Z + cam.CFrame.RightVector * move.X
                                    end
                                end
                            else
                                if UserInputService:IsKeyDown(Enum.KeyCode.W) then dir = dir + cam.CFrame.LookVector end
                                if UserInputService:IsKeyDown(Enum.KeyCode.S) then dir = dir - cam.CFrame.LookVector end
                                if UserInputService:IsKeyDown(Enum.KeyCode.A) then dir = dir - cam.CFrame.RightVector end
                                if UserInputService:IsKeyDown(Enum.KeyCode.D) then dir = dir + cam.CFrame.RightVector end
                                if UserInputService:IsKeyDown(Enum.KeyCode.Space) then dir = dir + Vector3.new(0, 1, 0) end
                                if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then dir = dir - Vector3.new(0, 1, 0) end
                            end
                            
                            if dir.Magnitude > 0 then 
                                dir = dir.Unit 
                                carFlyBody.Velocity = dir * carFlySpeed
                                carFlyGyro.CFrame = cam.CFrame
                            else
                                carFlyBody.Velocity = Vector3.new(0, 0, 0)
                            end
                        end)
                    end)
                    
                    print("‚úì Car Fly ativado")
                else
                    print("‚úó Entre em um carro primeiro!")
                end
            else
                if activeConnections.carFly then 
                    activeConnections.carFly:Disconnect() 
                    activeConnections.carFly = nil
                end
                if carFlyBody and carFlyBody.Parent then carFlyBody:Destroy() end
                carFlyBody = nil
                if carFlyGyro and carFlyGyro.Parent then carFlyGyro:Destroy() end
                carFlyGyro = nil
                print("‚úì Car Fly desativado")
            end
        end)
    end
})

Tab2:AddSlider({
    Text = "Velocidade Car Fly",
    Min = 10,
    Max = 200,
    Default = 70,
    Callback = function(v)
        carFlySpeed = v
    end
})

-- ========== TAB 3: TELEPORTE (CORRIGIDO) ==========
local Tab3 = Window:MakeTab({"Teleporte", "map-pin"})

Tab3:AddSection({"Teleporte para Jogadores"})

local selectedTPPlayer = nil

local tpPlayerDrop = Tab3:AddDropdown({
    Name = "Selecionar Jogador",
    Options = getPlayersList(),
    Default = "Nenhum",
    Callback = function(v)
        selectedTPPlayer = v
    end
})

Tab3:AddButton({"Teleportar", function()
    pcall(function()
        if selectedTPPlayer and selectedTPPlayer ~= "Nenhum" then
            local target = Players:FindFirstChild(selectedTPPlayer)
            if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
                rootPart.CFrame = target.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, 3)
                print("‚úì Teleportado para:", selectedTPPlayer)
            end
        end
    end)
end})

Tab3:AddButton({"Atualizar Lista", function()
    pcall(function()
        tpPlayerDrop:Refresh(getPlayersList(), true)
        print("‚úì Lista atualizada!")
    end)
end})

Tab3:AddSection({"Locais de Brookhaven"})

local locations = {
    ["Spawn"] = CFrame.new(-119.7, 8.2, 94.5),
    ["Hospital"] = CFrame.new(-225.9, 8.2, -474.3),
    ["Escola"] = CFrame.new(286.3, 8.2, -733.5),
    ["Banco"] = CFrame.new(-390.6, 8.2, -26.8),
    ["Igreja"] = CFrame.new(124.8, 8.2, -490.7),
    ["Praia"] = CFrame.new(-1034.5, 8.2, 523.8),
    ["Supermercado"] = CFrame.new(-450.2, 8.2, 120.5)
}

local selectedLocation = "Spawn"

Tab3:AddDropdown({
    Name = "Selecionar Local",
    Options = {"Spawn", "Hospital", "Escola", "Banco", "Igreja", "Praia", "Supermercado"},
    Default = "Spawn",
    Callback = function(v)
        selectedLocation = v
    end
})

Tab3:AddButton({"Teleportar para Local", function()
    pcall(function()
        if locations[selectedLocation] then
            rootPart.CFrame = locations[selectedLocation]
            print("‚úì Teleportado para:", selectedLocation)
        end
    end)
end})

Tab3:AddSection({"Click Teleport"})

Tab3:AddToggle({
    Name = "Click TP",
    Default = false,
    Callback = function(v)
        activeToggles.clickTP = v
        
        pcall(function()
            if v then
                local mouse = player:GetMouse()
                activeConnections.clickTP = mouse.Button1Down:Connect(function()
                    pcall(function()
                        if activeToggles.clickTP and mouse.Target then
                            rootPart.CFrame = CFrame.new(mouse.Hit.Position + Vector3.new(0, 3, 0))
                        end
                    end)
                end)
            else
                if activeConnections.clickTP then 
                    activeConnections.clickTP:Disconnect() 
                    activeConnections.clickTP = nil
                end
            end
        end)
    end
})

-- ========== TAB 4: VISUAL ==========
local Tab4 = Window:MakeTab({"Visual", "eye"})

Tab4:AddSection({"ESP de Jogadores"})

local espObjects = {}

Tab4:AddToggle({
    Name = "ESP",
    Default = false,
    Callback = function(v)
        activeToggles.esp = v
        
        pcall(function()
            if v then
                for _, p in pairs(Players:GetPlayers()) do
                    if p ~= player and p.Character then
                        local highlight = Instance.new("Highlight")
                        highlight.FillColor = Color3.fromRGB(255, 0, 0)
                        highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
                        highlight.FillTransparency = 0.5
                        highlight.Adornee = p.Character
                        highlight.Parent = p.Character
                        
                        espObjects[p.UserId] = highlight
                    end
                end
            else
                for _, highlight in pairs(espObjects) do
                    if highlight then 
                        pcall(function() highlight:Destroy() end) 
                    end
                end
                espObjects = {}
            end
        end)
    end
})

Tab4:AddSection({"Ilumina√ß√£o"})

Tab4:AddToggle({
    Name = "Fullbright",
    Default = false,
    Callback = function(v)
        activeToggles.fullbright = v
        
        pcall(function()
            if v then
                Lighting.Brightness = 2
                Lighting.FogEnd = 100000
            else
                Lighting.Brightness = originalBrightness
                Lighting.FogEnd = originalFogEnd
            end
        end)
    end
})

Tab4:AddSection({"Skybox"})

Tab4:AddDropdown({
    Name = "Cor do C√©u",
    Options = {"Normal", "Azul", "Vermelho", "Verde", "Roxo", "Rosa", "Laranja", "Noite"},
    Default = "Normal",
    Callback = function(v)
        pcall(function()
            if v == "Normal" then
                Lighting.Ambient = originalAmbient
            elseif v == "Azul" then
                Lighting.Ambient = Color3.fromRGB(100, 150, 255)
            elseif v == "Vermelho" then
                Lighting.Ambient = Color3.fromRGB(255, 50, 50)
            elseif v == "Verde" then
                Lighting.Ambient = Color3.fromRGB(50, 255, 100)
            elseif v == "Roxo" then
                Lighting.Ambient = Color3.fromRGB(150, 50, 255)
            elseif v == "Rosa" then
                Lighting.Ambient = Color3.fromRGB(255, 150, 200)
            elseif v == "Laranja" then
                Lighting.Ambient = Color3.fromRGB(255, 150, 50)
            elseif v == "Noite" then
                Lighting.Ambient = Color3.fromRGB(10, 10, 50)
            end
        end)
    end
})

Tab4:AddSection({"C√¢mera"})

Tab4:AddSlider({
    Text = "FOV",
    Min = 70,
    Max = 120,
    Default = 70,
    Callback = function(v)
        pcall(function()
            workspace.CurrentCamera.FieldOfView = v
        end)
    end
})

-- ========== TAB 5: FERRAMENTAS ==========
local Tab5 = Window:MakeTab({"Ferramentas", "tool"})

Tab5:AddSection({"Build Tool"})

Tab5:AddDropdown({
    Name = "Tipo de Bloco",
    Options = {
        "Bloco Cinza",
        "Bloco Vermelho",
        "Bloco Azul",
        "Bloco Verde",
        "Bloco Amarelo",
        "Bloco Roxo",
        "Vidro"
    },
    Default = "Bloco Cinza",
    Callback = function(v)
        selectedBlockType = v
    end
})

Tab5:AddButton({"Criar Build Tool", function()
    createBuildTool()
end})

Tab5:AddButton({"Deletar Blocos", function()
    pcall(function()
        local count = 0
        for _, obj in pairs(workspace:GetChildren()) do
            if obj:IsA("Part") and obj.Anchored and not obj:IsDescendantOf(character) then
                obj:Destroy()
                count = count + 1
            end
        end
        print("‚úì", count, "blocos deletados!")
    end)
end})

Tab5:AddSection({"Espionar Jogador"})

local selectedSpy = nil

local spyDrop = Tab5:AddDropdown({
    Name = "Selecionar Jogador",
    Options = getPlayersList(),
    Default = "Nenhum",
    Callback = function(v)
        selectedSpy = v
    end
})

Tab5:AddButton({"Espiar", function()
    pcall(function()
        if selectedSpy and selectedSpy ~= "Nenhum" then
            local target = Players:FindFirstChild(selectedSpy)
            if target and target.Character and target.Character:FindFirstChild("Humanoid") then
                workspace.CurrentCamera.CameraSubject = target.Character.Humanoid
                print("‚úì Espiando:", selectedSpy)
            end
        end
    end)
end})

Tab5:AddButton({"Parar", function()
    pcall(function()
        workspace.CurrentCamera.CameraSubject = humanoid
        print("‚úì C√¢mera restaurada")
    end)
end})

Tab5:AddButton({"Atualizar Lista", function()
    pcall(function()
        spyDrop:Refresh(getPlayersList(), true)
    end)
end})

Tab5:AddSection({"Itens"})

Tab5:AddButton({"Pegar Todos Itens", function()
    pcall(function()
        local count = 0
        for _, v in pairs(workspace:GetDescendants()) do
            if v:IsA("Tool") and v.Parent ~= player.Backpack and v.Parent ~= character then
                v.Parent = player.Backpack
                count = count + 1
            end
        end
        print("‚úì", count, "itens coletados!")
    end)
end})

-- ========== TAB 6: DIVERSOS (ANTI-BAN CORRIGIDO) ==========
local Tab6 = Window:MakeTab({"Diversos", "settings"})

Tab6:AddSection({"Anti-AFK"})

Tab6:AddToggle({
    Name = "Anti-AFK",
    Default = false,
    Callback = function(v)
        activeToggles.antiAFK = v
        
        pcall(function()
            if v then
                activeConnections.antiAFK = player.Idled:Connect(function()
                    pcall(function()
                        Services.VirtualUser:Button2Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
                        task.wait(1)
                        Services.VirtualUser:Button2Up(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
                    end)
                end)
                print("‚úì Anti-AFK ativado")
            else
                if activeConnections.antiAFK then 
                    activeConnections.antiAFK:Disconnect() 
                    activeConnections.antiAFK = nil
                end
                print("‚úì Anti-AFK desativado")
            end
        end)
    end
})

Tab6:AddSection({"Anti-Ban"})

Tab6:AddToggle({
    Name = "Anti-Ban",
    Default = false,
    Callback = function(v)
        activeToggles.antiBan = v
        
        pcall(function()
            if v then
                local count = 0
                
                -- Remover TouchTransmitters
                for _, obj in pairs(workspace:GetDescendants()) do
                    if obj:IsA("TouchTransmitter") then
                        obj:Destroy()
                        count = count + 1
                    end
                    
                    -- Desabilitar colis√µes com portas
                    if obj:IsA("Part") and (obj.Name:lower():match("door") or obj.Name:lower():match("gate") or obj.Name:lower():match("barrier")) then
                        obj.CanCollide = false
                    end
                end
                
                -- Monitorar novos TouchTransmitters
                activeConnections.antiBan = workspace.DescendantAdded:Connect(function(obj)
                    pcall(function()
                        if activeToggles.antiBan then
                            if obj:IsA("TouchTransmitter") then
                                task.wait(0.1)
                                obj:Destroy()
                            end
                            
                            if obj:IsA("Part") and (obj.Name:lower():match("door") or obj.Name:lower():match("gate") or obj.Name:lower():match("barrier")) then
                                obj.CanCollide = false
                            end
                        end
                    end)
                end)
                
                print("‚úì Anti-Ban ativado! Removidos:", count, "detectores")
            else
                if activeConnections.antiBan then 
                    activeConnections.antiBan:Disconnect() 
                    activeConnections.antiBan = nil
                end
                print("‚úì Anti-Ban desativado")
            end
        end)
    end
})

Tab6:AddSection({"F√≠sica"})

Tab6:AddSlider({
    Text = "Gravidade",
    Min = 0,
    Max = 500,
    Default = 196,
    Callback = function(v)
        pcall(function()
            workspace.Gravity = v
        end)
    end
})

Tab6:AddButton({"Resetar Gravidade", function()
    pcall(function()
        workspace.Gravity = originalGravity
        print("‚úì Gravidade restaurada")
    end)
end})

-- ========== TAB 7: CONFIG (RESETAR CORRIGIDO) ==========
local Tab7 = Window:MakeTab({"Config", "list"})

Tab7:AddSection({"Discord"})

Tab7:AddDiscordInvite({
    Name = "Dragon Hub Discord",
    Description = "Entre no servidor!",
    Logo = "rbxassetid://18751483361",
    Invite = "https://discord.gg/pVsWE7WszB"
})

Tab7:AddSection({"Controles"})

Tab7:AddButton({"Resetar Tudo", function()
    pcall(function()
        print("üîÑ Resetando tudo...")
        
        -- Desativar fly
        flying = false
        activeToggles.fly = false
        if activeConnections.fly then activeConnections.fly:Disconnect() end
        activeConnections.fly = nil
        if flyBody and flyBody.Parent then flyBody:Destroy() end
        flyBody = nil
        if flyGyro and flyGyro.Parent then flyGyro:Destroy() end
        flyGyro = nil
        
        -- Desativar noclip
        activeToggles.noclip = false
        if activeConnections.noclip then activeConnections.noclip:Disconnect() end
        activeConnections.noclip = nil
        for _, part in pairs(character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = true
            end
        end
        
        -- Desativar car speed/fly
        carSpeedEnabled = false
        carFlyEnabled = false
        activeToggles.carSpeed = false
        activeToggles.carFly = false
        if activeConnections.carSpeed then activeConnections.carSpeed:Disconnect() end
        if activeConnections.carFly then activeConnections.carFly:Disconnect() end
        activeConnections.carSpeed = nil
        activeConnections.carFly = nil
        if carFlyBody and carFlyBody.Parent then carFlyBody:Destroy() end
        carFlyBody = nil
        if carFlyGyro and carFlyGyro.Parent then carFlyGyro:Destroy() end
        carFlyGyro = nil
        
        -- Desativar outros
        activeToggles.clickTP = false
        activeToggles.infiniteJump = false
        activeToggles.antiAFK = false
        activeToggles.antiBan = false
        activeToggles.esp = false
        activeToggles.fullbright = false
        
        if activeConnections.clickTP then activeConnections.clickTP:Disconnect() end
        if activeConnections.infiniteJump then activeConnections.infiniteJump:Disconnect() end
        if activeConnections.antiAFK then activeConnections.antiAFK:Disconnect() end
        if activeConnections.antiBan then activeConnections.antiBan:Disconnect() end
        
        activeConnections.clickTP = nil
        activeConnections.infiniteJump = nil
        activeConnections.antiAFK = nil
        activeConnections.antiBan = nil
        
        -- Remover ESP
        for _, highlight in pairs(espObjects) do
            if highlight then highlight:Destroy() end
        end
        espObjects = {}
        
        -- Restaurar valores
        speedEnabled = false
        jumpEnabled = false
        
        if humanoid then
            humanoid.WalkSpeed = originalWalkSpeed
            humanoid.JumpPower = originalJumpPower
        end
        
        workspace.Gravity = originalGravity
        workspace.CurrentCamera.CameraSubject = humanoid
        workspace.CurrentCamera.FieldOfView = originalFOV
        
        Lighting.Brightness = originalBrightness
        Lighting.FogEnd = originalFogEnd
        Lighting.Ambient = originalAmbient
        
        print("‚úì TUDO RESETADO COM SUCESSO!")
        print("‚úì Velocidade:", originalWalkSpeed)
        print("‚úì Pulo:", originalJumpPower)
        print("‚úì Gravidade:", originalGravity)
        print("‚úì Todas as conex√µes desativadas")
    end)
end})

Tab7:AddButton({"Fechar Hub", function()
    pcall(function()
        -- Resetar antes de fechar
        for _, conn in pairs(activeConnections) do
            if conn then conn:Disconnect() end
        end
        
        Window:Destroy()
        print("‚úì Dragon Hub fechado!")
    end)
end})

-- ========== AUTO-ATUALIZA√á√ÉO ==========
pcall(function()
    Players.PlayerAdded:Connect(function()
        task.wait(1)
        pcall(function()
            if spyDrop then spyDrop:Refresh(getPlayersList(), true) end
            if tpPlayerDrop then tpPlayerDrop:Refresh(getPlayersList(), true) end
            if carPlayerDrop then carPlayerDrop:Refresh(getPlayersWithCars(), true) end
        end)
    end)

    Players.PlayerRemoving:Connect(function()
        task.wait(1)
        pcall(function()
            if spyDrop then spyDrop:Refresh(getPlayersList(), true) end
            if tpPlayerDrop then tpPlayerDrop:Refresh(getPlayersList(), true) end
            if carPlayerDrop then carPlayerDrop:Refresh(getPlayersWithCars(), true) end
        end)
    end)

    task.spawn(function()
        while task.wait(3) do
            pcall(function()
                if carPlayerDrop then
                    carPlayerDrop:Refresh(getPlayersWithCars(), true)
                end
            end)
        end
    end)
end)

print("‚úì Dragon Hub 3.0 - Beta 0.1 by:paozin Carregado!")
print("‚úì Todos os bugs corrigidos!")
print("‚úì Otimizado para PC e Mobile!")


local TabGAMEPASS = Window:MakeTab({"Free Gamepass", "star"})

-- Toggle para Vehicle Pass
TabGAMEPASS:AddToggle({
    Name = "Todos carros bloqueados de gra√ßa",
    Default = false,
    Callback = function(v)
        if v then
            warn("‚úÖ Vehicle Pass Toggle ativado!")
            
            _G.vehiclePassHook = hookmetamethod(game, "__namecall", function(self, ...)
                local args = {...}
                local method = getnamecallmethod()
                
                if method == "FireServer" and self.Name == "TelemetryClientInteraction" then
                    if args[1] == "contextualUpsell" and args[2] and type(args[2]) == "table" then
                        if args[2].reason == "vehice pass car" and args[2].itemId then
                            local carName = args[2].itemId
                            
                            warn("üöó VEHICLE PASS DETECTADO: " .. carName)
                            
                            task.spawn(function()
                                task.wait(0.5)
                                local spawnArgs = {"PickingCar", carName}
                                game:GetService("ReplicatedStorage"):WaitForChild("RE"):WaitForChild("1Ca1r"):FireServer(unpack(spawnArgs))
                                warn("‚úÖ Carro spawnado: " .. carName)
                            end)
                        end
                    end
                end
                
                return _G.vehiclePassHook(self, ...)
            end)
        else
            warn("‚ùå Vehicle Pass Toggle desativado!")
        end
    end
})

-- Toggle para Premium Cars
TabGAMEPASS:AddToggle({
    Name = "Todos carros premiums de gra√ßa",
    Default = false,
    Callback = function(v)
        if v then
            warn("‚úÖ Premium Car Toggle ativado!")
            
            _G.premiumCarHook = hookmetamethod(game, "__namecall", function(self, ...)
                local args = {...}
                local method = getnamecallmethod()
                
                if method == "FireServer" and self.Name == "TelemetryClientInteraction" then
                    if args[1] == "contextualUpsell" and args[2] and type(args[2]) == "table" then
                        if args[2].reason == "premium car" and args[2].itemId then
                            local carName = args[2].itemId
                            
                            warn("üíé PREMIUM CAR DETECTADO: " .. carName)
                            
                            task.spawn(function()
                                task.wait(0.5)
                                local spawnArgs = {"PickingCar", carName}
                                game:GetService("ReplicatedStorage"):WaitForChild("RE"):WaitForChild("1Ca1r"):FireServer(unpack(spawnArgs))
                                warn("‚úÖ Carro premium spawnado: " .. carName)
                            end)
                        end
                    end
                end
                
                return _G.premiumCarHook(self, ...)
            end)
        else
            warn("‚ùå Premium Car Toggle desativado!")
        end
    end
})
